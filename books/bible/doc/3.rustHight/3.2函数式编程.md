# 函数式编程

函数式编程的优秀特性

- 使用函数作为参数进行传递
- 使用函数作为函数返回值
- 将函数赋值给变量

函数式特性：

- 闭包 Closure
- 迭代器 Iterator
- 模式匹配
- 枚举

# 3.2.1 闭包 Closure

闭包是一种匿名函数，它可以赋值给变量也可以作为参数传递给其他函数，不同于函数的是，它允许捕获调用者作用域中的值

```rust
fn main() {
    let x = 1;
    let sum = |y| x + y;
    assert_eq!(3, sum(2));
}
```

闭包 sum，拥有一个入参 y，同时捕获了作用域中的 x 的值

sum 非常符合闭包的定义： 可以赋值给变量，允许捕获调用者作用域中的值

## 使用闭包来简化代码

闭包的形式定义

```rust
|param1,param2,...|{
  语句1；
  语句2；
  返回表达式
}
```

如果只有一个表达式的化，可以简化为：

```rust
|param1| 返回表达式
```

- let action = ||{}; 只是把闭包赋值给变量 action,并不是把闭包执行后的结果赋值给了 action

### 闭包的类型推到

与函数相反，闭包并不为作为 api 对外提供，因此他可以享受编译器的类型推导能力，无需标注参数和返回值的类型。

也可以显示的指明类型

虽然类型推导很好用，但是它不是泛型，当编译器推导出一个类型后，它就会一直使用该类型

#### 结构体中的闭包

```rust
struct Cacher<T>
where T: Fn(u32)->u32, {
  query: T,
  value: Option<u32>,
}
```
